!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=e=>new Date(e).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric"});var o={setFormatDate:r,container:document.querySelector(".news-list__container")};var i=function(){return"_"+Math.random().toString(9).substr(2,9)};var s={container:document.querySelector(".news-list"),id:i,setFormatDate:r};const c=new class{constructor(e){this.options=e}async getNews(){try{return(await fetch("https://nomoreparties.co/news/v2/top-headlines?country=us&apiKey=cefe7cbdc6b94355ae9ee08e1066ea96")).json()}catch(e){return console.log("Ошибка "+e),e}}},a=new class{constructor(e){this.options=e,this.countIcon="",this.count=0}_renderFrom(e,t,n){const{setFormatDate:r,id:o}=this.options;e.forEach(e=>{n.appendChild(this._templateFrom(e.title,e.author,r(e.publishedAt),e.url,o()))})}_render(e){const{container:t}=this.options;t.appendChild(this._template(e))}_templateFrom(e,t,n,r="",o=""){const i='\n    <form class="widget__form">\n      <div class="widget__form-inputGroup">\n        <input class="widget__form-input" id="" type="checkbox"/>\n        <label class="widget__form-label" for="">\n          <span class="widget__form-title"></span>\n          <div class="widget__form-info">\n            <span class="widget__form-author"></span>\n            <time class="widget__form-date" datetime=""></time>\n            <button class="button button__more">\n              <a class="widget__form-link" href="" title="" target="_blank" rel="noopener noreferrer"></a>\n            </button>\n          </div>\n        </label>\n      </div>\n    </form>\n  ',s=document.createElement("div");return s.insertAdjacentHTML("afterbegin",i.trim()),s.querySelector(".widget__form-label").setAttribute("for",""+o),s.querySelector(".widget__form-input").setAttribute("id",""+o),s.querySelector(".widget__form-link").href=r,s.querySelector(".widget__form-link").title=e,s.querySelector(".widget__form-link").textContent="read more",s.querySelector(".widget__form-date").dateTime=n,s.querySelector(".widget__form-date").textContent=n,s.querySelector(".widget__form-title").textContent=e,s.querySelector(".widget__form-author").textContent=t,s.firstChild}_template(e){this.count=e.length;const t='\n      <div class="widget">\n        <div class="widget__container disabled">\n          <div class="widget__footer">\n            <button class="button button__check"></button>\n            <button class="button button__hide"></button>\n          </div>\n        </div>\n        <button class="button-show button-show__img">\n          <span class="button-show__count"></span>\n        </button>\n      </div>\n    ',n=document.createElement("div");n.insertAdjacentHTML("beforeend",t.trim());const r=n.querySelector(".button__hide"),o=n.querySelector(".button-show"),i=n.querySelector(".button__check"),s=n.querySelector(".button-show__count"),c=n.querySelector(".widget__container");return this.countIcon=s,r.textContent="Hide",i.textContent="Check all",this._renderFrom(e,s,c),this._checkBoxControll(c,s),this._counRender(s),this._listener(o,r,i,c),n.firstChild}_counRender(){0===this.count?this.countIcon.classList.add("disabled"):(this.countIcon.classList.remove("disabled"),this.countIcon.textContent=this.count)}_checkBoxControll(e){e.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.addEventListener("change",()=>{e.checked?(this.count--,this._counRender()):(this.count++,this._counRender())})})}_check(e){e.querySelectorAll(".widget__form-input").forEach(e=>{!1===e.checked&&(e.checked=!0,this.count=0,this._counRender())})}_open(e,t){e.classList.remove("disabled"),t.classList.add("disabled")}_close(e,t){e.classList.add("disabled"),t.classList.remove("disabled")}_listener(e,t,n,r){e.addEventListener("click",this._open.bind(this,r,e)),t.addEventListener("click",this._close.bind(this,r,e)),n.addEventListener("click",this._check.bind(this,r))}}(s);new class{constructor(e,t,n){this.options=e,this.api=n,this.massageWidget=t}create(){this.api.getNews().then(e=>(this._render(e.articles),e)).then(e=>(this.massageWidget._render(e.articles),e)).catch(e=>this._templateError(e))}_render(e){const{container:t,setFormatDate:n}=this.options;e.forEach(e=>{t.appendChild(this._template(e.title,e.description,n(e.publishedAt),e.url,e.urlToImage,e.source.name,e.source.id))})}_template(e,t,n,r="",o,i,s=""){const c='\n      <div class="news-card" data-id="">\n        <h3 class="news-card__title"></h3>\n        <img src="" alt="" class="news-card__image">\n        <p class="news-card__text"></p>\n        <time class="news-card__date" datetime=""></time>\n        <a href="" class="news-card__link" title="" target="_blank" rel="noopener noreferrer"></a>\n      </div>\n    ',a=document.createElement("div");return a.insertAdjacentHTML("beforeend",c.trim()),a.querySelector(".news-card").dataset.id=s,a.querySelector(".news-card__link").href=r,a.querySelector(".news-card__link").title=e,a.querySelector(".news-card__link").textContent=i,a.querySelector(".news-card__image").src=o,a.querySelector(".news-card__image").alt="image",a.querySelector(".news-card__date").dateTime=n,a.querySelector(".news-card__date").textContent=n,a.querySelector(".news-card__title").textContent=e,a.querySelector(".news-card__text").textContent=t,a.firstChild}_templateError(e){const{container:t}=this.options,n='\n      <div>\n        <h2 class="error">Error</h2>\n        <p class="error__message"></p>\n      </div>\n    ',r=document.createElement("div");return r.insertAdjacentHTML("beforeend",n.trim()),r.querySelector(".error__message").textContent="Произошла ошибка:"+e,t.appendChild(r.firstChild)}}(o,a,c).create()}]);